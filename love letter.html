<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@1,600&family=Gaegu&display=swap" rel="stylesheet">

<style>
	body {display: flex;
		flex-direction: column;
		margin:0;
		font-family: 'Gaegu', cursive;
		background: radial-gradient(circle at center, #ffd6e0 30%, #ff8fab 100%);
		text-align: center;}

	h1 {font-family: 'VT323', monospace;
		font-size: clamp(40px, 8vw, 90px);
		color: #a50831;}

	p {font-family: Gaegu; 
		font-size: clamp(16px, 4vw, 24px);}

	.hero { height: 100vh;
		display: flex;
		justify-content: center;
		align-items: center;
		text-align: center;}

	.letter { min-height: 120vh;
  		display: flex;
  		justify-content: center;
 		 align-items: center;
  		text-align: center;

 		 font-family: 'Gaegu', cursive;
  		font-size: 26px;
  		color: #A50831;

  		padding: 40px;
		}

	button {font-family: Gaegu;

		margin-top: 5px;
		font-size: 33px;
		padding: 20px 70px;

		border-radius: 20px;
		border: none;
		background-color: #F7739B;
		color: white;

		display: inline-block;
		cursor: pointer;}

	button:hover {transform: scale(1.12);}
</style>
</head>

<body> 
	<div class="hero">
	<h1> ♡ Happy Valentine's day!! ♡ </h1>
	</div>

<style>
.sparkle-container { position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	pointer-events: none;
	overflow: hidden;
	z-index: 999;}

.sparkle { position: absolute;
	position: absolute;
	color: #fa427d;
	font-size: 14px;
	opacity: 0.8;
	animation: fall linear forwards;
	user-select: none;}

.flower-section {
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
}

#lilyPixel{
  display:grid;
  grid-template-columns: repeat(29, 14px);
	grid-template-rows: repeat(29, 14px);
  gap:0px;
}

.pixel{
  width:14px;
  height:14px;
  opacity:0;
 transform:scale(0);
  transition: 0.25s ease;
}

.cell {
  opacity: 0;
  transform: scale(0.3);
  transition: 0.3s ease;
}

.cell.show-stem {
  opacity: 1;
  transform: scale(1);
}

.cell.show-petal {
  opacity: 1;
  transform: scale(1.2);
}

.e{ background:transparent; }
.g{ background:#3f7f3f; }      /* batang */
.l{ background:#ffffff; }      /* kelopak putih */
.s{ background:#eaeaea; }
.m{ background:#bebebe; }      /* shading */
.b{ background:#a06040; }      /* pot */
.d{ background:#7a4c2c; } 

.flower-wrapper{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:28px;
}

.flower-text{
  font-size:20px;
  color:#a50831;
  min-height: 40px;
  letter-spacing: 2px;
  font-family:'Gaegu', cursive;
}

.flower-text{
  font-size:20px;
  color:#a50831;
  animation: fadeIn 2s ease 3s forwards;
  opacity:0;
  white-space: pre-line;
}

.extra-text{
  min-height: 60vh;
  display:flex;
  justify-content:center;
  align-items:center;
  text-align:center;
  padding:40px;
  color:#a50831;
  font-family:'Gaegu', cursive;
  font-size: clamp(16px, 3vw, 22px);
}


@keyframes fadeIn{
  to{opacity:1;}
}

@keyframes grow{
  to{
    opacity:1;
    transform:translateY(0);
  }
}

@keyframes fall {
	0% { transform: translateY(-10vh) translateX(0) rotate(0deg); opacity:0;}

	20% {opacity: 0.8;}
	
	25% {transform: translateY(25vh) translateX(-12px) rotate(-8deg);}
	50% {transform: translateY(50vh) translateX(12px) rotate(8deg);}
	75% {transform: translateY(75vh) translateX(-10px) rotate(-6deg);}

	100% { transform: translateY(110vh) translateX(0) rotate(0deg);
	opacity: 0;} }
	
	

	 
</style>

<div class="sparkle-container" id="sparkleContainer"></div>

<script>
const container = document.getElementById("sparkleContainer");

let sparkleInterval;

function createSparkle() {
  const heart = document.createElement("div");
  heart.className = "sparkle";

	heart.innerHTML = "❤";

  const size = Math.random() * 10 + 8;
  heart.style.fontSize = size + "px";
  

  heart.style.left = Math.random() * 95 + "vw";

  const duration = Math.random() * 5 + 6; 
  heart.style.animationDuration = duration + "s";
	heart.style.animationDelay = Math.random() * 2 + "s";

	
 
 heart.style.opacity = Math.random() * 0.5 + 0.4;

container.appendChild(heart);

setTimeout(() => heart.remove(), duration * 1000);
}

function startSparkle() {
  sparkleInterval = setInterval(createSparkle, 250);
}

function stopSparkle() {
  clearInterval(sparkleInterval);
}

startSparkle();

window.addEventListener("scroll", stopSparkle);
</script>



<div style="height: 120vh;"></div> 

<section class="letter">
	<p>
	happy valentine's day ♡ <br>
	thank u for being here with me, bb<br> <br>
	scroll lagiii yaa ^^
	</p>
</section>

<section class="flower-section">
  <div class="flower-wrapper">
    <div id="lilyPixel"></div>
    <p id= "flowerText" class="flower-text"></p>
  </div>
</section>


<script>
const lilyContainer = document.getElementById("lilyPixel");

const art = [
"eeeeeeeeeelllleeeeeeeeeeeeeee",
"eeeeeeeeeeellslleeeeelleeeeee",
"eeeeeeeeeeeellslleellllleeeee",
"eeeeeeeeeeeeelsslllssleeeeeee",
"eeeeeeelssleelsslsslleeeeeeee",
"eeeeeellllsllllssslleeeeeeeee",
"eeeeeeleelslsssssslllleeeeeee",
"eeeeeeeeeellsssmmsssslleeeeee",
"eeeeeeeeeellssmmmmsslslleeeee",
"eeeeeeeeeelsslmssslllllleeeee",
"eeeeeeeeellssllsssleeeeleeeee",
"eeeeeeeellssllllsslleeeeeeeee",

"eeeeeeeelsslleegllslleeeeeeee",
"eeeeeeeellsleeegglllleeeeeeee",
"eeeeeeeeellleeeggelleeeeeeeee",
"eeeeeeeeeeleeeeggeleeeeeeeeee",
"eeeeeeeeeeeeeeeggeeeeeeeeeeee",
"eeeeeeeeeeeeeeeggeeeeeeeeeeee",
"eeeeeeeeeeeeeeeggeeeeeeeeeeee",
"eeeeeeeeeeeeeeeggeeeeeeeeeeee",
"eeeeeeeeeeeeeeeggeeeeeeeeeeee",
"eeeeeeeeeeeeeeeggeeeeeeeeeeee",

"eeeeeeeeeeeddbbbbbbddeeeeeeee",
"eeeeeeeeeeeedbbbbbbdeeeeeeeee",
"eeeeeeeeeeeedbbbbbbdeeeeeeeee",
"eeeeeeeeeeeedbbbbbbdeeeeeeeee",
"eeeeeeeeeeeeeddddddeeeeeeeeee",

"eeeeeeeeeeeeeeeeeeeeeeeeeeeee",
"eeeeeeeeeeeeeeeeeeeeeeeeeeeee",
"eeeeeeeeeeeeeeeeeeeeeeeeeeeee",
];

let built = false;

function typeWriter(text, speed=60){
  const el = document.getElementById("flowerText");
  el.textContent = "";

  let i = 0;
  const typing = setInterval(()=>{
    el.textContent += text[i];
    i++;
    if(i >= text.length) clearInterval(typing);
  }, speed);
}

function buildLily(){
  if(built) return;
  built = true;

  const totalRows = art.length;
  const growSpeed = 120;

  art.forEach((row, rowIndex) => {

    row.split("").forEach((char) => {

      const px = document.createElement("div");
      px.className = "pixel " + char;

      lilyContainer.appendChild(px);

      const baseDelay = (totalRows - rowIndex) * growSpeed;

      if(char === "g"){
        setTimeout(()=>{ px.style.opacity=1; px.style.transform="scale(1)"; }, baseDelay);
      }

      if(char === "s" || char === "m"){
        setTimeout(()=>{ px.style.opacity=1; px.style.transform="scale(1.05)"; }, baseDelay+200);
      }

      if(char === "l"){
        setTimeout(()=>{ px.style.opacity=1; px.style.transform="scale(1.35)"; }, baseDelay+600);
      }

      if(char === "b" || char === "d"){
        px.style.opacity=1;
        px.style.transform="scale(1)";
      }

    });

  });

  /* text muncul setelah bunga selesai */
  const totalGrowTime = totalRows * growSpeed + 1200;

  setTimeout(()=>{
    typeWriter(`i grew this flower just for you ♡ 
i loveee u always in all ways 
uhm.. aku gatau lagi gimana caranya bilang kalau 
aku sayang banget sama kamu 
so.. u will always be my favorite destination 
wherever i go, 
u're my home, and u are my everything. 
i love to love u.`, 80);
  }, totalGrowTime);
}

/* SATU listener aja */
window.addEventListener("scroll", () => {
  const section = document.querySelector(".flower-section");
  const rect = section.getBoundingClientRect();

  if(rect.top < window.innerHeight - 120){
    buildLily();
  }
});
</script>


<section class="extra-text">
  <p>
    ♡♡♡
  </p>
</section>


</body>